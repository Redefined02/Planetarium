<html>
	<head>
		<title>Planetarium</title>
		<style>
			body {
				font-family: Monospace;
				background-color: #000;
				color: #fff;
				margin: 0px;
				overflow: hidden;
			}
			canvas {
				width: 100%; height: 100%
			}
			#info {
				position: absolute;
				top: 10px;
				width: 100%;
				text-align: center;
				z-index: 100;
				display:block;
			}
			#info a { color: #f00; font-weight: bold; text-decoration: underline; cursor: pointer }

		</style>
	</head>
	<body>
		<div id="info">
			Planetarium</br>
			move camera with WASD, zoom in and out with left/right mouse
		</div>
		<script src="js/three.min.js"></script>
		<script src="lib/examples/js/controls/FirstPersonControls.js"></script>
		<script>
			// declare variables
			var solarSystem, camera, scene, renderer, controls, bgScene, bgCamera, clock;
      var height = window.innerHeight;
      var width = window.innerWidth;

			init();
			animate();

			function init(){
				renderer = new THREE.WebGLRenderer();
				document.body.appendChild(renderer.domElement);
				renderer.setSize(width, height);
				solarSystem = new THREE.Group();
				scene = new THREE.Scene()
				camera = new THREE.PerspectiveCamera( 75, width/height, 0.1, 1000 );
				camera.position.z = 15;
				clock = new THREE.Clock();

				// create scene/camera for backdrop
				bgScene = new THREE.Scene();
				bgCamera = new THREE.Camera();
				bgScene.add(bgCamera);

				// set up controls
				controls = new THREE.FirstPersonControls(camera);
				controls.movementSpeed = 10;
				controls.lookSpeed = 0;
				controls.lookVertical = true;

				// set up all your planets/textures/geometries/objects
				var geometry = new THREE.SphereGeometry( 1, 32, 32 );
				var plane = new THREE.PlaneGeometry(2, 2, 0);
				var loader = new THREE.TextureLoader();

				// set cors policy to anonymous to load texture images
				loader.setCrossOrigin("");

				// create a backdrop with a starfield texture
				loader.load("http://i.imgur.com/9xXRzuT.jpg?1", function(texture){
					var planeMat = new THREE.MeshBasicMaterial({map:texture});
					var starfield = new THREE.Mesh(plane, planeMat);
					starfield.material.depthTest = false;
					starfield.material.depthWrite = false;
					bgScene.add(starfield);
				});

				loader.load("http://i.imgur.com/Rgl3AtE.jpg?2", function(texture){
					var sunMat = new THREE.MeshBasicMaterial({map:texture, overdraw: 0.5});
					var sun = new THREE.Mesh(geometry, sunMat);
					sun.position.set(0, 0, 0);
					solarSystem.add(sun);
				});

				loader.load("http://i.imgur.com/8rlD8tu.jpg", function(texture){
					var mercuryMat = new THREE.MeshBasicMaterial({map:texture, overdraw: 0.5});
					var mercury = new THREE.Mesh(geometry, mercuryMat);
					mercury.position.set(2.2, 0, 0);
					solarSystem.add(mercury);
				});

				loader.load("http://i.imgur.com/1exVoLT.jpg", function(texture){
					var venusMat = new THREE.MeshBasicMaterial({map:texture, overdraw: 0.5});
					var venus = new THREE.Mesh(geometry, venusMat);
					venus.position.set(4.4, 0, 0);
					solarSystem.add(venus);
				});

				loader.load("http://i.imgur.com/NPI2Xq8.jpg", function(texture){
					var earthMat = new THREE.MeshBasicMaterial({map:texture, overdraw: 0.5});
					var earth = new THREE.Mesh(geometry, earthMat);
					earth.position.set(6.6, 0, 0);
					solarSystem.add(earth);
				});

				loader.load("http://i.imgur.com/qimsjii.jpg", function(texture){
					var marsMat = new THREE.MeshBasicMaterial({map:texture, overdraw: 0.5});
					var mars = new THREE.Mesh(geometry, marsMat);
					mars.position.set(8.8, 0, 0);
					solarSystem.add(mars);
				});

				loader.load("http://i.imgur.com/64LsZak.jpg?2", function(texture){
					var jupiterMat = new THREE.MeshBasicMaterial({map:texture, overdraw: 0.5});
					var jupiter = new THREE.Mesh(geometry, jupiterMat);
					jupiter.position.set(11, 0, 0);
					solarSystem.add(jupiter);
				});

				loader.load("http://i.imgur.com/OiVJTrL.jpg", function(texture){
					var saturnMat = new THREE.MeshBasicMaterial({map:texture, overdraw: 0.5});
					var saturn = new THREE.Mesh(geometry, saturnMat);
					saturn.position.set(13.2, 0, 0);
					solarSystem.add(saturn);
				});

				loader.load("http://i.imgur.com/9pCZmH5.jpg", function(texture){
					var uranusMat = new THREE.MeshBasicMaterial({map:texture, overdraw: 0.5});
					var uranus = new THREE.Mesh(geometry, uranusMat);
					uranus.position.set(15.4, 0, 0);
					solarSystem.add(uranus);
				});

				loader.load("http://i.imgur.com/StPIvES.jpg", function(texture){
					var neptuneMat = new THREE.MeshBasicMaterial({map:texture, overdraw: 0.5});
					var neptune = new THREE.Mesh(geometry, neptuneMat);
					neptune.position.set(17.6, 0, 0);
					solarSystem.add(neptune);
				});

				loader.load("http://i.imgur.com/SQVRRGU.jpg?1", function(texture){
					var plutoMat = new THREE.MeshBasicMaterial({map:texture, overdraw: 0.5});
					var pluto = new THREE.Mesh(geometry, plutoMat);
					pluto.position.set(20, 0, 0);
					solarSystem.add(pluto);
				});

      	scene.add(solarSystem);

				window.addEventListener('resize', onWindowResize, false);
			}

		// resizes the canvas to fit window size.
		function onWindowResize(){
			camera.aspect = window.innerWidth / window.innerHeight;
			camera.updateProjectionMatrix();

			renderer.setSize( window.innerWidth, window.innerHeight );
			controls.handleResize();
		}

		function animate(){
			requestAnimationFrame(animate);
			render();
		}

		function render(){
			solarSystem.rotation.y += 0.01;
			controls.update(clock.getDelta());

			// this is required to allow the backdrop to render without covering the planets
			renderer.autoClear = false;
			renderer.clear();
			// add both scenes to the renderer
			renderer.render(bgScene, bgCamera);
			renderer.render(scene, camera);
		};
		</script>
	</body>
</html>
